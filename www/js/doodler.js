!function t(i,e,s){function n(o,a){if(!e[o]){if(!i[o]){var _="function"==typeof require&&require;if(!a&&_)return _(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var l=e[o]={exports:{}};i[o][0].call(l.exports,function(t){var e=i[o][1][t];return n(e?e:t)},l,l.exports,t,i,e,s)}return e[o].exports}for(var r="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,i,e){"use strict";var s=t("./hsl"),n=function(){function t(t,i,e,n){this.primary_hsl=null,this.secondary_hsl=null,this._canvas=document.createElement("canvas"),this._canvas.id=t,this._canvas.width=e,this._canvas.height=n,this._canvas.style.display="inline";var r=document.getElementById(i);r.appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),this._canvas.oncontextmenu=function(){return!1},this._l_slider=document.createElement("input"),this._l_slider.setAttribute("type","range"),this._l_slider.min="0",this._l_slider.max="100",this._l_slider.value="50",this.draw_gradient(),this.primary_hsl=new s.HSL(0),this.secondary_hsl=new s.HSL(180),this._primary_preview=document.createElement("div"),this._primary_preview.style.height=n/2+"px",this._primary_preview.style.width=n/2+"px",this._primary_preview.style.backgroundColor=this.primary_hsl.as_string(),this._primary_preview.style.display="inline-block",this._primary_preview.style.position="relative",this._primary_preview.style.bottom=n/2+"px",this._secondary_preview=document.createElement("div"),this._secondary_preview.style.height=n/2+"px",this._secondary_preview.style.width=n/2+"px",this._secondary_preview.style.backgroundColor=this.secondary_hsl.as_string(),this._secondary_preview.style.display="inline-block",this._secondary_preview.style.position="relative",this._secondary_preview.style.right=n/2+"px",r.appendChild(this._primary_preview),r.appendChild(this._secondary_preview),r.appendChild(this._l_slider),r.style.display="inline",this.init_event_listeners()}return t.prototype.get_primary_hsl=function(){return this.primary_hsl},t.prototype.get_secondary_hsl=function(){return this.secondary_hsl},t.prototype.init_event_listeners=function(){console.log("ColorPicker::init"),this._canvas.addEventListener("mousedown",this.pick_color.bind(this)),this._l_slider.addEventListener("change",this.draw_gradient.bind(this))},t.prototype.draw_gradient=function(){for(var t=this._canvas.width,i=this._canvas.height,e=this._l_slider.value,s=0;s<t;s++)for(var n=0;n<i;n++){var r=this.normalize_h(s),o=this.normalize_s(n);this._ctx.fillStyle="hsl("+r+","+o+"%,"+e+"%)",this._ctx.fillRect(s,n,1,1)}},t.prototype.pick_color=function(t){console.log("ColorPicker::pick_color",t);var i=this.normalize_h(t.offsetX),e=this.normalize_s(t.offsetY),s=Number(this._l_slider.value);0==t.button?(this.primary_hsl.set(i,e,s),this._primary_preview.style.backgroundColor=this.primary_hsl.as_string()):2==t.button&&(this.secondary_hsl.set(i,e,s),this._secondary_preview.style.backgroundColor=this.secondary_hsl.as_string())},t.prototype.normalize_h=function(t){return Math.floor(360*t/this._canvas.width)},t.prototype.normalize_s=function(t){return Math.floor(100-100*t/this._canvas.height)},t}();e.ColorPicker=n},{"./hsl":3}],2:[function(t,i,e){"use strict";var s=function(){function t(t,i,e,s,n){this._bound_draw=null,this._bound_start_drawing=null,this._bound_stop_drawing=null,this._color_source=n,this._canvas=document.createElement("canvas"),this._canvas.id=t,this._canvas.width=e,this._canvas.height=s,document.getElementById(i).appendChild(this._canvas),this._ctx=this._canvas.getContext("2d"),this._canvas.oncontextmenu=function(){return!1},this.start_draw_listeners(),this.set_line_width(4)}return t.prototype.test_circle=function(){this._ctx.beginPath(),this._ctx.arc(95,50,40,0,2*Math.PI),this._ctx.stroke()},t.prototype.start_draw_listeners=function(){console.log("Doodler:start_draw_listeners"),this._bound_start_drawing||(this._bound_start_drawing=this.start_drawing.bind(this),this._canvas.addEventListener("mousedown",this._bound_start_drawing,!1)),this._bound_stop_drawing||(this._bound_stop_drawing=this.stop_drawing.bind(this),this._canvas.addEventListener("mouseup",this._bound_stop_drawing,!1))},t.prototype.stop_draw_listeners=function(){console.log("Doodler:stop_draw_listeners"),this._bound_start_drawing&&(this._canvas.removeEventListener("mousedown",this._bound_start_drawing,!1),this._bound_start_drawing=null),this._bound_stop_drawing&&(this._canvas.removeEventListener("mouseup",this._bound_stop_drawing,!1),this._bound_stop_drawing=null)},t.prototype.set_line_width=function(t){this._ctx.lineWidth=t},t.prototype.start_drawing=function(t){if(0==t.button&&null===this._bound_draw){var i=this.draw.bind(this);this._bound_draw=i,this._canvas.addEventListener("mousemove",i,!1);var e=t.offsetX,s=t.offsetY,n=this._color_source.get_primary_hsl().as_string();this._ctx.strokeStyle=n,this._ctx.fillStyle=n,this._ctx.beginPath(),this._ctx.moveTo(e,s);var r=this._ctx.lineWidth;e-=Math.floor(r/2),s-=Math.floor(r/2),this._ctx.fillRect(e,s,r,r)}},t.prototype.draw=function(t){if(0==t.button){var i=t.offsetX,e=t.offsetY;this._ctx.lineTo(i,e),this._ctx.stroke()}},t.prototype.stop_drawing=function(t){if(0==t.button&&null!==this._bound_draw){this._canvas.removeEventListener("mousemove",this._bound_draw,!1),this._bound_draw=null;var i=t.offsetX,e=t.offsetY;this._ctx.lineTo(i,e);var s=this._ctx.lineWidth;i-=Math.floor(s/2),e-=Math.floor(s/2),this._ctx.fillRect(i,e,s,s),this._ctx.stroke()}},t.prototype.clear_canvas=function(){console.log("Doodler::clear_canvas"),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._ctx.beginPath()},t.prototype.save_image=function(){console.log("Doodler::save_canvas_blob"),this._saved_image=this._canvas.toDataURL("image/png")},t.prototype.load_image=function(){console.log("Doodler::load_canvas_blob");var t=new Image;t.src=this._saved_image,this._ctx.drawImage(t,0,0)},t}();e.Doodler=s},{}],3:[function(t,i,e){"use strict";var s=function(){function t(t,i,e){void 0===i&&(i=100),void 0===e&&(e=50),this.set(t,i,e)}return t.prototype.set=function(t,i,e){void 0===i&&(i=100),void 0===e&&(e=50),console.log(t),this.h=t%360,i<0?this.s=0:i>100?this.s=100:this.s=i,e<0?this.l=0:e>100?this.l=100:this.l=e},t.prototype.as_string=function(){return"hsl("+this.h+", "+this.s+"%, "+this.l+"%)"},t}();e.HSL=s},{}],4:[function(t,i,e){"use strict";var s=t("./doodler"),n=t("./color_picker"),r=new n.ColorPicker("color-picker","color-picker-container",360,50),o=new s.Doodler("doodler-canvas","doodler-container",800,600,r),a=document.getElementById("clear"),_=document.getElementById("save"),h=document.getElementById("load");a.addEventListener("click",o.clear_canvas.bind(o)),_.addEventListener("click",o.save_image.bind(o)),h.addEventListener("click",o.load_image.bind(o))},{"./color_picker":1,"./doodler":2}]},{},[4]);
//# sourceMappingURL=doodler.js.map
