{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","ts/color_picker.ts","ts/doodler.ts","ts/hsl.ts","ts/main.ts"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","hsl_1","ColorPicker","id","parent","width","height","this","primary_hsl","secondary_hsl","_canvas","document","createElement","style","display","parent_elmt","getElementById","appendChild","_ctx","getContext","oncontextmenu","_l_slider","setAttribute","min","max","value","draw_gradient","HSL","_primary_preview","backgroundColor","as_string","position","bottom","_secondary_preview","right","init_event_listeners","prototype","get_primary_hsl","get_secondary_hsl","console","log","addEventListener","pick_color","bind","j","h","normalize_h","normalize_s","fillStyle","fillRect","evt","offsetX","offsetY","Number","button","set","Math","floor","Doodler","color_source","_bound_draw","_bound_start_drawing","_bound_stop_drawing","_color_source","start_draw_listeners","set_line_width","test_circle","beginPath","arc","PI","stroke","start_drawing","stop_drawing","stop_draw_listeners","removeEventListener","lineWidth","bound_draw","draw","x","y","color","strokeStyle","moveTo","lineTo","clear_canvas","clearRect","save_image","_saved_image","toDataURL","load_image","image","Image","src","drawImage","doodler_1","color_picker_1","color_picker","doodler","clear_btn","save_btn","load_btn"],"mappings":"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","file":"doodler.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import {HSL} from \"./hsl\"\r\nimport {iColorSource} from \"./iColorSource\"\r\n\r\nexport class ColorPicker implements iColorSource{\r\n    private _canvas: HTMLCanvasElement\r\n    private _ctx: CanvasRenderingContext2D\r\n\r\n    private _l_slider: HTMLInputElement\r\n\r\n    private _primary_preview: HTMLDivElement\r\n    private _secondary_preview: HTMLDivElement\r\n\r\n    private primary_hsl: HSL = null\r\n    private secondary_hsl: HSL = null\r\n\r\n    constructor( id: string, parent: string, width: number, height: number ){\r\n        this._canvas = document.createElement(\"canvas\")\r\n        this._canvas.id = id\r\n        this._canvas.width = width\r\n        this._canvas.height = height\r\n        this._canvas.style.display = \"inline\"\r\n        let parent_elmt = document.getElementById(parent)\r\n        parent_elmt.appendChild(this._canvas)\r\n        this._ctx = this._canvas.getContext(\"2d\")\r\n\r\n        // disable the context menu\r\n        this._canvas.oncontextmenu = function(){ return false }\r\n\r\n\r\n        this._l_slider = document.createElement(\"input\")\r\n        this._l_slider.setAttribute(\"type\", \"range\")\r\n        this._l_slider.min = \"0\"\r\n        this._l_slider.max = \"100\"\r\n        this._l_slider.value = \"50\"\r\n\r\n        // add color gradient\r\n        this.draw_gradient()\r\n\r\n        this.primary_hsl = new HSL(0)\r\n        this.secondary_hsl = new HSL(180)\r\n\r\n        this._primary_preview = document.createElement(\"div\")\r\n        this._primary_preview.style.height = height/2 + \"px\"\r\n        this._primary_preview.style.width = height/2 + \"px\"\r\n        this._primary_preview.style.backgroundColor = this.primary_hsl.as_string()\r\n        this._primary_preview.style.display = \"inline-block\"\r\n        this._primary_preview.style.position = \"relative\"\r\n        this._primary_preview.style.bottom = height/2 + \"px\"\r\n\r\n        this._secondary_preview = document.createElement(\"div\")\r\n        this._secondary_preview.style.height = height/2 + \"px\"\r\n        this._secondary_preview.style.width = height/2 + \"px\"\r\n        this._secondary_preview.style.backgroundColor = this.secondary_hsl.as_string()\r\n        this._secondary_preview.style.display = \"inline-block\"\r\n        this._secondary_preview.style.position = \"relative\"\r\n        this._secondary_preview.style.right = height/2 + \"px\"\r\n\r\n\r\n        parent_elmt.appendChild(this._primary_preview)\r\n        parent_elmt.appendChild(this._secondary_preview)\r\n        parent_elmt.appendChild(this._l_slider)\r\n        parent_elmt.style.display = \"inline\"\r\n\r\n\r\n        this.init_event_listeners()\r\n    }\r\n\r\n    get_primary_hsl(){\r\n        return this.primary_hsl\r\n    }\r\n\r\n    get_secondary_hsl(){\r\n        return this.secondary_hsl\r\n    }\r\n\r\n    init_event_listeners(){\r\n        console.log(\"ColorPicker::init\")\r\n        this._canvas.addEventListener(\"mousedown\",this.pick_color.bind(this))\r\n        this._l_slider.addEventListener(\"change\",this.draw_gradient.bind(this))\r\n    }\r\n\r\n    draw_gradient(){\r\n        let width = this._canvas.width\r\n        let height = this._canvas.height\r\n        let l = this._l_slider.value\r\n\r\n        for (let i = 0; i < width; i++) {\r\n            for(let j = 0; j < height; j++){\r\n                let h = this.normalize_h(i)\r\n                let s = this.normalize_s(j)\r\n                this._ctx.fillStyle = \"hsl(\" + h + \",\" + s + \"%,\" + l +\"%)\"\r\n                this._ctx.fillRect(i,j,1,1)\r\n            }\r\n        }\r\n    }\r\n\r\n    pick_color(evt: MouseEvent){\r\n        console.log(\"ColorPicker::pick_color\",evt)\r\n\r\n        let h = this.normalize_h(evt.offsetX)\r\n        let s = this.normalize_s(evt.offsetY)\r\n        let l = Number(this._l_slider.value)\r\n\r\n        if(evt.button == 0 ){ // set primary_hsl\r\n            this.primary_hsl.set(h,s,l)\r\n            this._primary_preview.style.backgroundColor = this.primary_hsl.as_string()\r\n        } else if( evt.button == 2 ){\r\n            this.secondary_hsl.set(h,s,l)\r\n            this._secondary_preview.style.backgroundColor = this.secondary_hsl.as_string()\r\n        }\r\n\r\n\r\n    }\r\n\r\n    normalize_h(h: number){\r\n        return Math.floor(h * 360/this._canvas.width)\r\n    }\r\n\r\n    normalize_s(s: number){\r\n        return Math.floor(100-(s * 100/this._canvas.height))\r\n    }\r\n\r\n}","import {iColorSource} from \"./iColorSource\"\r\n\r\nexport class Doodler {\r\n    private _canvas: HTMLCanvasElement\r\n    private _ctx: CanvasRenderingContext2D\r\n\r\n    private _bound_draw: EventListenerObject = null\r\n    private _bound_start_drawing: EventListenerObject = null\r\n    private _bound_stop_drawing: EventListenerObject = null\r\n\r\n    private _color_source: iColorSource\r\n\r\n    private _saved_image: string\r\n\r\n    constructor( id: string, parent: string, width: number, height: number, color_source: iColorSource ) {\r\n        this._color_source = color_source\r\n\r\n        this._canvas = document.createElement(\"canvas\")\r\n        this._canvas.id = id\r\n        this._canvas.width = width\r\n        this._canvas.height = height\r\n        document.getElementById(parent).appendChild(this._canvas)\r\n        this._ctx = this._canvas.getContext(\"2d\")\r\n\r\n        // disable the context menu\r\n        this._canvas.oncontextmenu = function(){ return false }\r\n\r\n        this.start_draw_listeners()\r\n        this.set_line_width(4)\r\n    }\r\n\r\n    private test_circle() {\r\n        this._ctx.beginPath()\r\n        this._ctx.arc(95,50,40,0,2*Math.PI)\r\n        this._ctx.stroke()\r\n    } \r\n\r\n    private start_draw_listeners(){\r\n        console.log(\"Doodler:start_draw_listeners\")\r\n        // this._canvas.addEventListener()\r\n\r\n        if (!this._bound_start_drawing) {\r\n            this._bound_start_drawing = this.start_drawing.bind(this)\r\n            this._canvas.addEventListener(\"mousedown\", this._bound_start_drawing, false)\r\n        }\r\n\r\n        if (!this._bound_stop_drawing) {\r\n            this._bound_stop_drawing = this.stop_drawing.bind(this)\r\n            this._canvas.addEventListener(\"mouseup\", this._bound_stop_drawing, false)\r\n        }\r\n    }\r\n\r\n    private stop_draw_listeners(){\r\n        console.log(\"Doodler:stop_draw_listeners\")\r\n        if (this._bound_start_drawing) {\r\n            this._canvas.removeEventListener(\"mousedown\", this._bound_start_drawing, false)\r\n            this._bound_start_drawing = null\r\n        }\r\n        \r\n        if (this._bound_stop_drawing){\r\n            this._canvas.removeEventListener(\"mouseup\", this._bound_stop_drawing, false)\r\n            this._bound_stop_drawing = null\r\n        }\r\n    }\r\n\r\n    private set_line_width(width: number){\r\n        this._ctx.lineWidth = width\r\n    }\r\n\r\n    private start_drawing(evt: MouseEvent){\r\n        if(evt.button == 0 && this._bound_draw === null){\r\n            let bound_draw = this.draw.bind(this)\r\n            this._bound_draw = bound_draw\r\n            this._canvas.addEventListener(\"mousemove\", bound_draw, false)\r\n\r\n            let x = evt.offsetX, y = evt.offsetY\r\n            let color = this._color_source.get_primary_hsl().as_string()\r\n            this._ctx.strokeStyle = color\r\n            this._ctx.fillStyle = color\r\n            this._ctx.beginPath()\r\n            this._ctx.moveTo(x,y)\r\n            let width = this._ctx.lineWidth\r\n            x = x - Math.floor(width/2)\r\n            y = y - Math.floor(width/2)\r\n            this._ctx.fillRect( x, y, width, width ); // adds a single pixel\r\n        }\r\n    }\r\n\r\n    private draw(evt: MouseEvent){\r\n        if(evt.button == 0){\r\n            let x = evt.offsetX, y = evt.offsetY\r\n            this._ctx.lineTo(x,y)\r\n            this._ctx.stroke()\r\n        }\r\n\r\n    }\r\n\r\n    private stop_drawing(evt: MouseEvent){\r\n        if(evt.button == 0 && this._bound_draw !== null){\r\n            this._canvas.removeEventListener(\"mousemove\", this._bound_draw, false)\r\n            this._bound_draw = null\r\n\r\n            let x = evt.offsetX, y = evt.offsetY\r\n            this._ctx.lineTo(x,y)\r\n            let width = this._ctx.lineWidth\r\n            x = x - Math.floor(width/2)\r\n            y = y - Math.floor(width/2)\r\n            this._ctx.fillRect( x, y, width, width ); // adds a single pixel\r\n            \r\n            this._ctx.stroke()\r\n        }\r\n    }\r\n\r\n    clear_canvas(){\r\n        console.log(\"Doodler::clear_canvas\")\r\n        this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height)\r\n        this._ctx.beginPath() // call this just for safety\r\n    }\r\n\r\n    save_image(){\r\n        console.log(\"Doodler::save_canvas_blob\")\r\n        this._saved_image = this._canvas.toDataURL('image/png')\r\n    }\r\n\r\n    load_image(){\r\n        console.log(\"Doodler::load_canvas_blob\")\r\n        let image = new Image()\r\n        image.src = this._saved_image\r\n        this._ctx.drawImage(image,0,0)\r\n    }\r\n\r\n}","export class HSL {\r\n    public h: number\r\n    public s: number\r\n    public l: number\r\n\r\n    constructor( h: number, s = 100, l = 50 ){\r\n        this.set(h,s,l)\r\n    }\r\n\r\n    set( h: number, s = 100, l = 50 ){\r\n        console.log(h)\r\n        this.h = h % 360\r\n\r\n        if ( s < 0 ) { \r\n            this.s = 0\r\n        } else if (s > 100){ \r\n            this.s = 100\r\n        } else{\r\n            this.s = s\r\n        }\r\n\r\n        if ( l < 0 ) { \r\n            this.l = 0\r\n        } else if (l > 100){ \r\n            this.l = 100\r\n        } else{\r\n            this.l = l\r\n        }\r\n    }\r\n\r\n    as_string(){\r\n        return \"hsl(\"+this.h+\", \"+this.s+\"%, \"+this.l+\"%)\"\r\n    }\r\n}","import {Doodler} from \"./doodler\"\r\nimport {ColorPicker} from \"./color_picker\"\r\n\r\nlet color_picker = new ColorPicker('color-picker','color-picker-container', 360, 50)\r\nlet doodler = new Doodler('doodler-canvas',\"doodler-container\", 800, 600, color_picker)\r\n\r\n\r\n\r\n// hook up event buttons\r\nlet clear_btn = document.getElementById(\"clear\")\r\nlet save_btn = document.getElementById(\"save\")\r\nlet load_btn = document.getElementById(\"load\")\r\n\r\nclear_btn.addEventListener(\"click\", doodler.clear_canvas.bind(doodler))\r\nsave_btn.addEventListener(\"click\", doodler.save_image.bind(doodler))\r\nload_btn.addEventListener(\"click\", doodler.load_image.bind(doodler))"],"sourceRoot":"/source/"}